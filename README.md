# django-projects
Проект с учебными заданиями по django. Проект называется D2_9, 
подпрограммы показа новостей в приложении NewsPortal, 
работа с авторами и пользователями - средствами allauth и приложения ......


Текущее состояние - выполнено задание к модулю D3, 
по части задания D4 есть постраничный вывод, фильтрация и страница поиска не готовы. 
есть страницы добавления, редактирования и удаления постов, но не работает 
(ошибка: не придумал, как добавлять автора, как сделать - см. D4.5)
Идёт работа по добавлению работы с пользователями и средств аутентификации из задания по разделу D5.
Сначала делаю аутентификацию, а страницу редактирования данных пользователя - потом. 
#### Задание к модулю D13
Настроить логгирование следующим образом:
1) В консоль должны выводиться все сообщения уровня DEBUG и выше, включающие время, уровень сообщения, сообщения.
   Для сообщений WARNING и выше дополнительно должен выводиться путь к источнику события
   (используется аргумент pathname в форматировании). А для сообщений ERROR и CRITICAL еще должен выводить стэк ошибки
   (аргумент exc_info). Сюда должны попадать все сообщения с основного логгера django.
2) В файл general.log должны выводиться сообщения уровня INFO и выше только с указанием
   времени, уровня логирования, модуля, в котором возникло сообщение (аргумент module) и само сообщение.
   Сюда также попадают сообщения с регистратора django.
3) В файл errors.log должны выводиться сообщения только уровня ERROR и CRITICAL. В сообщении указывается
   время, уровень логирования, само сообщение, путь к источнику сообщения и стэк ошибки.
   В этот файл должны попадать сообщения только из логгеров
   django.request, django.server, django.template, django.db_backends.
4) В файл security.log должны попадать только сообщения, связанные с безопасностью, а значит только из
   логгера django.security. Формат вывода предполагает время, уровень логирования, модуль и сообщение.
5) На почту должны отправляться сообщения уровней ERROR и выше из django.request и django.server по формату,
   как в errors.log, но без стэка ошибок.
Более того, при помощи фильтров нужно указать, что в консоль сообщения отправляются только при DEBUG = True,
а на почту и в файл general.log — только при DEBUG = False.

#### Задание к модулю D7
1) Установить Redis. - **ОК**
2) Установить Celery. - **ОК**
3) Произвести необходимые конфигурации Django для соединения всех компонент системы.
4) Реализовать рассылку уведомлений подписчикам после создания новости.
5) Реализовать еженедельную рассылку с последними новостями (каждый понедельник в 8:00 утра).

#### Задание к модулю D6
1) Добавьте пользователю возможность подписываться на рассылку новостей в какой-либо категории. 
   Для этого добавьте поле subscribers (соотношение manytomany), в которое будут записываться пользователи, 
   подписанные на обновления в данной категории. 
   И при добавлении новости из этой категории пользователю на email, указанный при регистрации, 
   будет приходить письмо с HTML-кодом заголовка и первых 50 символов текста статьи.
   В теме письма должен быть сам заголовок статьи. 
   Текст состоит из вышеуказанного HTML и текста: 
   «Здравствуй, username. Новая статья в твоём любимом разделе!».
   На самом сайте должна быть возможность пользователю подписаться на категорию 
   (добавьте маленькую кнопку «Подписаться», когда пользователь находится на странице новостей 
   в какой-то категории).
2) Добавьте приветственное письмо, которое отправляется пользователю при регистрации. 
   Содержание и посыл письма остается на ваш выбор, 
   главное — обязательно добавьте ссылку на активацию и укажите в нём имя пользователя!
   При создании новости подписчикам этой категории автоматически отправляется 
   сообщение о пополнении в разделе. Содержание письма остаётся на ваше усмотрение, 
   главное, чтобы в нём была отражена краткая информация о данной новости.
   Один пользователь не может публиковать более трёх новостей в сутки.
3) В категории должна быть возможность пользователей подписываться на рассылку новых статей.
4) Если пользователь подписан на какую-либо категорию, то, как только в неё добавляется новая статья, 
   её краткое содержание приходит пользователю на электронную почту, которую он указал при регистрации. В письме обязательно должна быть гиперссылка на саму статью, чтобы он мог по клику перейти и прочитать её.
5) Если пользователь подписан на какую-либо категорию, то каждую неделю ему приходит на почту 
   список новых статей, появившийся за неделю с гиперссылкой на них, 
   чтобы пользователь мог перейти и прочесть любую из статей.
6) Добавьте приветственное письмо пользователю при регистрации в приложении.
#### Задание к модулю D5
1) В классе-представлении редактирования профиля добавить проверку аутентификации.
2) Выполнить необходимые настройки пакета allauth в файле конфигурации.
3) В файле конфигурации определить адрес для перенаправления на страницу входа в систему 
   и адрес перенаправления после успешного входа.
4) Реализовать шаблон с формой входа в систему и выполнить настройку конфигурации URL.
5) Реализовать шаблон страницы регистрации пользователей.
6) Реализовать возможность регистрации через Google-аккаунт.
7) Создать группы common и authors.
8) Реализовать автоматическое добавление новых пользователей в группу common.
9) Создать возможность стать автором (быть добавленным в группу authors).
10) Для группы authors предоставить права создания и редактирования объектов модели Post 
    (новостей и статей).
11) В классах-представлениях добавления и редактирования новостей и статей добавить проверку 
    прав доступа.

Исходный код залить в git-репозиторий.

#### Задание к модулю D4:
В ходе работы с модулем надо выполнить следующие задания:
1) Добавьте постраничный вывод на /news/, чтобы на одной странице было не больше 10 новостей 
   и видны номера лишь ближайших страниц, а также возможность перехода к первой или последней странице.
2) Добавьте страницу /news/search. На ней должна быть реализована возможность искать новости 
   по определённым критериям. Критерии должны быть следующие:
   * по названию;
   * по категории;
   * позже указываемой даты.

Убедитесь, что можно выполнить фильтрацию сразу по нескольким критериям.
Для вывода поля фильтрации по датам вам может понадобиться указать специальный тип в HTML.
3) Запрограммировать страницы создания, редактирования и удаления новостей и статей. 
   Страницы рекомендуется расположить по следующим ссылкам:
   - /news/create/
   - /news/<int:pk>/edit/
   - /news/<int:pk>/delete/
   - /articles/create/
   - /articles/<int:pk>/edit/
   - /articles/<int:pk>/delete/

После добавления в проект средств аутентификации (раздел D5) эти страницы будут доступны 
в зависимости от пользователя.  

#### Задание к модулю D3:
В ходе работы с модулем надо выполнить следующие задания:
1) Создать новую страницу с адресом /news/, на которой должен выводиться список всех новостей.
2) Вывести все статьи в виде заголовка, даты публикации и первых 20 символов текста.
   Новости должны выводиться в порядке от более свежей к самой старой.
3) Сделать отдельную страницу для полной информации о статье /news/<id новости>.
   На этой странице должна быть вся информация о статье. Название, текст и дата загрузки в формате день.месяц.год.
4) Написать собственный фильтр censor, который заменяет буквы нежелательных слов в заголовках и текстах статей
   на символ «*».

Все новые страницы должны использовать шаблон default.html как основу.

#### Задание к модулю D2:  
В консоли Django надо:
* Создать двух пользователей (с помощью метода User.objects.create_user('username')).
* Создать два объекта модели Author, связанные с пользователями.
* Добавить 4 категории в модель Category.
* Добавить 2 статьи и 1 новость.
* Присвоить им категории (как минимум в одной статье/новости должно быть не меньше 2 категорий).
* Создать как минимум 4 комментария к разным объектам модели Post (в каждом объекте должен быть как минимум один комментарий).
* Применяя функции like() и dislike() к статьям/новостям и комментариям, скорректировать рейтинги этих объектов.
* Обновить рейтинги пользователей.
* Вывести username и рейтинг лучшего пользователя (применяя сортировку и возвращая поля первого объекта).
* Вывести дату добавления, username автора, рейтинг, заголовок и превью лучшей статьи, основываясь на лайках/дислайках к этой статье.
* Вывести все комментарии (дата, пользователь, рейтинг, текст) к этой статье.

Команды для выполнения в консоли Django записаны в файл D2_9_commands.py
